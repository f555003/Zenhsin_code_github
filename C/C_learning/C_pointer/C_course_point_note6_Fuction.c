/*
 * @Descripttion: how to send point to function
 * @version: 
 * @Author: Mu-Hsin,Wu
 * @Date: 2021-06-24 19:16:05
 * @LastEditors: Please set LastEditors
 * @LastEditTime: 2021-06-24 21:42:57
 */
#include<stdio.h>
void test2(int *p);//函數宣告


int main()
{
    int num=90;
    int *p =&num;// 將 num 的地址賦給 p
    test2(&num);// 傳地址
    //說明 test2(&num);
/*
    內存
    |------------------------------------------------------|
    |stack                                                 |
    |   |-------------------------------------------|      |
    |   |test2                                      |      |
    |   |     *p ----->[0x1122] 0X1166 <----------- |---   |
    |   |     *P += 1;                              |  |   |
    |   |      說明                                 |  |   |
    |   |     *p 取得 num 儲存數據值 90               |  |   |
    |   |      執行*P += 1;                         |  |   |
    |   |     執行完後會傳 91，stack 銷毀 test2       |  |   |
    |   |                                          |  |   |
    |   |------------------------------------------|  |   |
    |                                                 |   |
    |                                                 |   |
    |                                                 |   |
    |                                                 |   |
    |   |------------------------------------------|  |   |
    |   |main                                      |  |   |
    |   |    num ---->[90] 0x1122 -----------------|--|   |
    |   |    p  ----->[0X1122] 0x1133              |      |
    |   |------------------------------------------|      |
    |-----------------------------------------------------|
*/
    printf("main() 中的 num = %d\n",num);// num = 91
    test2(p);
    //說明 test2(p);
/*
    內存
    |-----------------------------------------------------|
    |stack                                                |
    |   |-------------------------------------------|     |
    |   |test2                                      |     |
    |   |     *p ----->[0x1122] 0X1166 <------------|--   |
    |   |     *P += 1;                              | |   |
    |   |      說明                                  | |   |
    |   |     *p 取得 p所保存的值                      | |   |
    |   |      p 保存的值是 0x1122                    | |   |
    |   |      因此 *p 會取到 0x1122 的值 91           | |   |
    |   |      再執行*P += 1;                          | |   |
    |   |     執行完後會傳 92，stack 銷毀 test2        | |   |
    |   |                                           | |   |
    |   |-------------------------------------------| |   |
    |                                                 |   |
    |                                                 |   |
    |                                                 |   |
    |                                                 |   |
    |   |-------------------------------------------| |   |
    |   |main                                       | |   |
    |   |    num ---->[90] 0x1122                   | |   |
    |   |    p  ----->[0X1122] 0x1133 --------------|-|   |
    |   |-------------------------------------------|      |
    |-----------------------------------------------------|
*/
    printf("main() 中的 num = %d\n"); // num = 92
    return 0;
}

void test2(int *p)
{
    *p += 1;//同等於 *p = (*p) + 1;
}